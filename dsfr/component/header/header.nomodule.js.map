{"version":3,"file":"header.nomodule.js","sources":["../../../.config/config.js","../../../src/core/api.js","../../../src/component/header/script/header/header-selector.js","../../../src/component/header/script/header/header-links.js","../../../src/component/header/script/header/header-modal.js","../../../src/component/header/index.js","../../../src/component/header/main.js"],"sourcesContent":["const config = {\r\n  prefix: 'fr',\r\n  namespace: 'dsfr',\r\n  organisation: '@gouvfr',\r\n  version: '1.9.1'\r\n};\r\n\r\nexport default config;\r\n","import config from './config.js';\nconst api = window[config.namespace];\nexport default api;\n","import api from '../../api.js';\n\nexport const HeaderSelector = {\n  HEADER: api.internals.ns.selector('header'),\n  TOOLS_LINKS: api.internals.ns.selector('header__tools-links'),\n  MENU_LINKS: api.internals.ns.selector('header__menu-links'),\n  BUTTONS: `${api.internals.ns.selector('header__tools-links')} ${api.internals.ns.selector('btns-group')}, ${api.internals.ns.selector('header__tools-links')} ${api.internals.ns.selector('links-group')}`,\n  MODALS: `${api.internals.ns.selector('header__search')}${api.internals.ns.selector('modal')}, ${api.internals.ns.selector('header__menu')}${api.internals.ns.selector('modal')}`\n};\n","import api from '../../api.js';\nimport { HeaderSelector } from './header-selector.js';\n\nclass HeaderLinks extends api.core.Instance {\n  static get instanceClassName () {\n    return 'HeaderLinks';\n  }\n\n  init () {\n    const header = this.queryParentSelector(HeaderSelector.HEADER);\n    this.toolsLinks = header.querySelector(HeaderSelector.TOOLS_LINKS);\n    this.menuLinks = header.querySelector(HeaderSelector.MENU_LINKS);\n    const copySuffix = '-mobile';\n\n    const toolsHtml = this.toolsLinks.innerHTML.replace(/  +/g, ' ');\n    const menuHtml = this.menuLinks.innerHTML.replace(/  +/g, ' ');\n    // Pour éviter de dupliquer des id, on ajoute un suffixe aux id et aria-controls duppliqués.\n    let toolsHtmlDuplicateId = toolsHtml.replace(/(<nav[.\\s\\S]*-translate [.\\s\\S]*) id=\"(.*?)\"([.\\s\\S]*<\\/nav>)/gm, '$1 id=\"$2' + copySuffix + '\"$3');\n    toolsHtmlDuplicateId = toolsHtmlDuplicateId.replace(/(<nav[.\\s\\S]*-translate [.\\s\\S]*) aria-controls=\"(.*?)\"([.\\s\\S]*<\\/nav>)/gm, '$1 aria-controls=\"$2' + copySuffix + '\"$3');\n\n    if (toolsHtmlDuplicateId === menuHtml) return;\n\n    switch (api.mode) {\n      case api.Modes.ANGULAR:\n      case api.Modes.REACT:\n      case api.Modes.VUE:\n        api.inspector.warn(`header__tools-links content is different from header__menu-links content.\nAs you're using a dynamic framework, you should handle duplication of this content yourself, please refer to documentation:\n${api.header.doc}`);\n        break;\n\n      default:\n        this.menuLinks.innerHTML = toolsHtmlDuplicateId;\n    }\n  }\n}\n\nexport { HeaderLinks };\n","import api from '../../api.js';\n\nclass HeaderModal extends api.core.Instance {\n  constructor () {\n    super();\n    this._clickHandling = this.clickHandler.bind(this);\n  }\n\n  static get instanceClassName () {\n    return 'HeaderModal';\n  }\n\n  init () {\n    this.isResizing = true;\n  }\n\n  resize () {\n    if (this.isBreakpoint(api.core.Breakpoints.LG)) this.unqualify();\n    else this.qualify();\n  }\n\n  qualify () {\n    this.setAttribute('role', 'dialog');\n    const modal = this.element.getInstance('Modal');\n    if (!modal) return;\n    const buttons = modal.buttons;\n    let id = '';\n    for (const button of buttons) {\n      id = button.id || id;\n      if (button.isPrimary && id) break;\n    }\n    this.setAttribute('aria-labelledby', id);\n    this.listen('click', this._clickHandling, { capture: true });\n  }\n\n  unqualify () {\n    const modal = this.element.getInstance('Modal');\n    if (modal) modal.conceal();\n    this.removeAttribute('role');\n    this.removeAttribute('aria-labelledby');\n    this.unlisten('click', this._clickHandling, { capture: true });\n  }\n\n  clickHandler (e) {\n    if (e.target.matches('a, button') && !e.target.matches('[aria-controls]') && !e.target.matches(api.core.DisclosureSelector.PREVENT_CONCEAL)) {\n      const modal = this.element.getInstance('Modal');\n      modal.conceal();\n    }\n  }\n}\n\nexport { HeaderModal };\n","import api from './api.js';\nimport { HeaderLinks } from './script/header/header-links.js';\nimport { HeaderModal } from './script/header/header-modal.js';\nimport { HeaderSelector } from './script/header/header-selector.js';\n\napi.header = {\n  HeaderLinks: HeaderLinks,\n  HeaderModal: HeaderModal,\n  HeaderSelector: HeaderSelector,\n  doc: 'https://www.systeme-de-design.gouv.fr/elements-d-interface/composants/en-tete'\n};\n\nexport default api;\n","import api from './index.js';\n\napi.internals.register(api.header.HeaderSelector.TOOLS_LINKS, api.header.HeaderLinks);\napi.internals.register(api.header.HeaderSelector.MODALS, api.header.HeaderModal);\n\nexport default api;\n"],"names":["const","let","super"],"mappings":"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"}