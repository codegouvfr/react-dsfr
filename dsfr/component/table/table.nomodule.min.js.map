{"version":3,"file":"table.nomodule.min.js","sources":["../../../.config/config.js","../../../src/dsfr/core/api.js","../../../src/dsfr/component/table/script/table/table-emission.js","../../../src/dsfr/component/table/script/table/table.js","../../../src/dsfr/component/table/script/table/table-wrapper.js","../../../src/dsfr/component/table/script/table/table-selector.js","../../../src/dsfr/component/table/script/table/table-element.js","../../../src/dsfr/component/table/script/table/table-caption.js","../../../src/dsfr/component/checkbox/script/checkbox/checkbox-emission.js","../../../src/dsfr/component/table/script/table/table-row.js","../../../src/dsfr/component/table/index.js","../../../src/dsfr/component/table/main.js"],"sourcesContent":["const config = {\r\n  prefix: 'fr',\r\n  namespace: 'dsfr',\r\n  organisation: '@gouvfr',\r\n  version: '1.13.0'\r\n};\r\n\r\nexport default config;\r\n","import config from './config.js';\nconst api = window[config.namespace];\nexport default api;\n","import api from '../../api.js';\n\nexport const TableEmission = {\n  SCROLLABLE: api.internals.ns.emission('table', 'scrollable'),\n  CHANGE: api.internals.ns.emission('table', 'change'),\n  CAPTION_HEIGHT: api.internals.ns.emission('table', 'captionheight'),\n  CAPTION_WIDTH: api.internals.ns.emission('table', 'captionwidth')\n};\n","import api from '../../api.js';\nimport { TableEmission } from './table-emission.js';\n\nclass Table extends api.core.Instance {\n  static get instanceClassName () {\n    return 'Table';\n  }\n\n  init () {\n    this.addAscent(TableEmission.CAPTION_HEIGHT, this.setCaptionHeight.bind(this));\n  }\n\n  setCaptionHeight (value) {\n    this.setProperty('--table-offset', value);\n  }\n}\n\nexport { Table };\n","import api from '../../api.js';\nimport { TableEmission } from './table-emission.js';\n\nclass TableWrapper extends api.core.Instance {\n  static get instanceClassName () {\n    return 'TableWrapper';\n  }\n\n  init () {\n    this.addAscent(TableEmission.CAPTION_HEIGHT, this.setCaptionHeight.bind(this));\n  }\n\n  setCaptionHeight (value) {\n    requestAnimationFrame(() => this.ascend(TableEmission.CAPTION_HEIGHT, 0));\n    this.setProperty('--table-offset', value);\n  }\n}\n\nexport { TableWrapper };\n","import api from '../../api.js';\n\nexport const TableSelector = {\n  TABLE: api.internals.ns.selector('table'),\n  TABLE_WRAPPER: [`${api.internals.ns.selector('table')} ${api.internals.ns.selector('table__wrapper')}`],\n  SHADOW: api.internals.ns.selector('table__shadow'),\n  SHADOW_LEFT: api.internals.ns.selector('table__shadow--left'),\n  SHADOW_RIGHT: api.internals.ns.selector('table__shadow--right'),\n  ELEMENT: [`${api.internals.ns.selector('table')}:not(${api.internals.ns.selector('table--no-scroll')}) table`],\n  CAPTION: `${api.internals.ns.selector('table')} table caption`,\n  ROW: `${api.internals.ns.selector('table')} tbody tr`,\n  COL: `${api.internals.ns.selector('table')} thead th`\n};\n","import api from '../../api.js';\nimport { TableSelector } from './table-selector.js';\n\nconst SCROLL_OFFSET = 0; // valeur en px du scroll avant laquelle le shadow s'active ou se desactive\n\nclass TableElement extends api.core.Instance {\n  static get instanceClassName () {\n    return 'TableElement';\n  }\n\n  init () {\n    this.listen('scroll', this.scroll.bind(this));\n    this.content = this.querySelector('tbody');\n    this.tableOffsetHeight = 0;\n    this.isResizing = true;\n  }\n\n  get isScrolling () {\n    return this._isScrolling;\n  }\n\n  set isScrolling (value) {\n    if (this._isScrolling === value) return;\n    this._isScrolling = value;\n\n    if (value) {\n      this.addClass(TableSelector.SHADOW);\n      this.scroll();\n    } else {\n      this.removeClass(TableSelector.SHADOW);\n      this.removeClass(TableSelector.SHADOW_LEFT);\n      this.removeClass(TableSelector.SHADOW_RIGHT);\n    }\n  }\n\n  /* ajoute la classe fr-table__shadow-left ou fr-table__shadow-right sur fr-table en fonction d'une valeur de scroll et du sens (right, left) */\n  scroll () {\n    const isMin = this.node.scrollLeft <= SCROLL_OFFSET;\n    const max = this.content.offsetWidth - this.node.offsetWidth - SCROLL_OFFSET;\n    const isMax = Math.abs(this.node.scrollLeft) >= max;\n    const isRtl = document.documentElement.getAttribute('dir') === 'rtl';\n    const minSelector = isRtl ? TableSelector.SHADOW_RIGHT : TableSelector.SHADOW_LEFT;\n    const maxSelector = isRtl ? TableSelector.SHADOW_LEFT : TableSelector.SHADOW_RIGHT;\n\n    if (isMin) {\n      this.removeClass(minSelector);\n    } else {\n      this.addClass(minSelector);\n    }\n\n    if (isMax) {\n      this.removeClass(maxSelector);\n    } else {\n      this.addClass(maxSelector);\n    }\n  }\n\n  resize () {\n    this.isScrolling = this.content.offsetWidth > this.node.offsetWidth;\n  }\n\n  dispose () {\n    this.isScrolling = false;\n  }\n}\n\nexport { TableElement };\n","import api from '../../api.js';\nimport { TableEmission } from './table-emission.js';\n\nconst PADDING = '1rem'; // padding de 4v sur le caption\nclass TableCaption extends api.core.Instance {\n  static get instanceClassName () {\n    return 'TableCaption';\n  }\n\n  init () {\n    this.height = 0;\n    this.isResizing = true;\n  }\n\n  resize () {\n    const height = this.getRect().height;\n    if (this.height === height) return;\n    this.height = height;\n    this.ascend(TableEmission.CAPTION_HEIGHT, `calc(${height}px + ${PADDING})`);\n  }\n}\n\nexport { TableCaption };\n","import api from '../../api.js';\n\nconst CheckboxEmission = {\n  CHANGE: api.internals.ns.emission('checkbox', 'change'),\n  RETRIEVE: api.internals.ns.emission('checkbox', 'retrieve')\n};\n\nexport { CheckboxEmission };\n","import api from '../../api.js';\nimport { CheckboxEmission } from '../../../checkbox/script/checkbox/checkbox-emission.js';\n\nclass TableRow extends api.core.Instance {\n  static get instanceClassName () {\n    return 'TableRow';\n  }\n\n  init () {\n    if (api.checkbox) {\n      this.addAscent(CheckboxEmission.CHANGE, this._handleCheckboxChange.bind(this));\n      this.descend(CheckboxEmission.RETRIEVE);\n    }\n  }\n\n  _handleCheckboxChange (node) {\n    if (node.name === 'row-select' ||\n      node.getAttribute(api.internals.ns.attr('row-select')) === 'true') {\n      this.isSelected = node.checked === true;\n    }\n  }\n\n  render () {\n    const height = this.getRect().height + 2;\n    if (this._height === height) return;\n    this._height = height;\n    this.setProperty('--row-height', `${this._height}px`);\n  }\n\n  get isSelected () {\n    return this._isSelected;\n  }\n\n  set isSelected (value) {\n    if (this._isSelected === value) return;\n    this.isRendering = value;\n    this._isSelected = value;\n    this.setAttribute('aria-selected', value);\n  }\n}\n\nexport { TableRow };\n","import api from './api.js';\nimport { Table } from './script/table/table.js';\nimport { TableWrapper } from './script/table/table-wrapper.js';\nimport { TableElement } from './script/table/table-element.js';\nimport { TableSelector } from './script/table/table-selector.js';\nimport { TableCaption } from './script/table/table-caption.js';\nimport { TableRow } from './script/table/table-row.js';\n\napi.table = {\n  Table: Table,\n  TableWrapper: TableWrapper,\n  TableElement: TableElement,\n  TableCaption: TableCaption,\n  TableSelector: TableSelector,\n  TableRow: TableRow\n};\n\nexport default api;\n","import api from './index.js';\n\napi.internals.register(api.table.TableSelector.TABLE, api.table.Table);\napi.internals.register(api.table.TableSelector.TABLE_WRAPPER, api.table.TableWrapper);\napi.internals.register(api.table.TableSelector.ELEMENT, api.table.TableElement);\napi.internals.register(api.table.TableSelector.CAPTION, api.table.TableCaption);\napi.internals.register(api.table.TableSelector.ROW, api.table.TableRow);\n\nexport default api;\n"],"names":["const","api","window","TableEmission","SCROLLABLE","internals","ns","emission","CHANGE","CAPTION_HEIGHT","CAPTION_WIDTH","Table","superclass","staticAccessors","instanceClassName","prototype","init","this","addAscent","setCaptionHeight","bind","value","setProperty","core","Instance","TableWrapper","requestAnimationFrame","ascend","TableSelector","TABLE","selector","TABLE_WRAPPER","SHADOW","SHADOW_LEFT","SHADOW_RIGHT","ELEMENT","CAPTION","ROW","COL","TableElement","listen","scroll","content","querySelector","tableOffsetHeight","isResizing","prototypeAccessors","isScrolling","_isScrolling","set","addClass","removeClass","isMin","node","scrollLeft","max","offsetWidth","isMax","Math","abs","isRtl","document","documentElement","getAttribute","minSelector","maxSelector","resize","dispose","TableCaption","height","getRect","CheckboxEmission","RETRIEVE","TableRow","checkbox","_handleCheckboxChange","descend","name","attr","isSelected","checked","render","_height","_isSelected","isRendering","setAttribute","table","register"],"mappings":"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"}